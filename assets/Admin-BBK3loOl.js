import{r as p,g as T,b as C,u as w,j as e,s as k,f as R,h as H,m as S,n as j,k as y}from"./index-Duuw3hmM.js";const q=p.createContext();function W(t){return T("MuiTable",t)}C("MuiTable",["root","stickyHeader"]);const G=t=>{const{classes:o,stickyHeader:a}=t;return H({root:["root",a&&"stickyHeader"]},W,o)},J=k("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:a}=t;return[o.root,a.stickyHeader&&o.stickyHeader]}})(S(({theme:t})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...t.typography.body2,padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:o})=>o.stickyHeader,style:{borderCollapse:"separate"}}]}))),B="table",M=p.forwardRef(function(o,a){const n=w({props:o,name:"MuiTable"}),{className:r,component:i=B,padding:l="normal",size:d="medium",stickyHeader:u=!1,...g}=n,s={...n,component:i,padding:l,size:d,stickyHeader:u},h=G(s),f=p.useMemo(()=>({padding:l,size:d,stickyHeader:u}),[l,d,u]);return e.jsx(q.Provider,{value:f,children:e.jsx(J,{as:i,role:i===B?null:"table",ref:a,className:R(h.root,r),ownerState:s,...g})})}),$=p.createContext();function K(t){return T("MuiTableBody",t)}C("MuiTableBody",["root"]);const Q=t=>{const{classes:o}=t;return H({root:["root"]},K,o)},V=k("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),X={variant:"body"},D="tbody",N=p.forwardRef(function(o,a){const n=w({props:o,name:"MuiTableBody"}),{className:r,component:i=D,...l}=n,d={...n,component:i},u=Q(d);return e.jsx($.Provider,{value:X,children:e.jsx(V,{className:R(u.root,r),as:i,ref:a,role:i===D?null:"rowgroup",ownerState:d,...l})})});function Y(t){return T("MuiTableCell",t)}const Z=C("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),ee=t=>{const{classes:o,variant:a,align:n,padding:r,size:i,stickyHeader:l}=t,d={root:["root",a,l&&"stickyHeader",n!=="inherit"&&`align${j(n)}`,r!=="normal"&&`padding${j(r)}`,`size${j(i)}`]};return H(d,Y,o)},te=k("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:a}=t;return[o.root,o[a.variant],o[`size${j(a.size)}`],a.padding!=="normal"&&o[`padding${j(a.padding)}`],a.align!=="inherit"&&o[`align${j(a.align)}`],a.stickyHeader&&o.stickyHeader]}})(S(({theme:t})=>({...t.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?t.lighten(t.alpha(t.palette.divider,1),.88):t.darken(t.alpha(t.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(t.vars||t).palette.text.primary}},{props:{variant:"footer"},style:{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${Z.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:o})=>o.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default}}]}))),c=p.forwardRef(function(o,a){const n=w({props:o,name:"MuiTableCell"}),{align:r="inherit",className:i,component:l,padding:d,scope:u,size:g,sortDirection:s,variant:h,...f}=n,x=p.useContext(q),b=p.useContext($),A=b&&b.variant==="head";let m;l?m=l:m=A?"th":"td";let _=u;m==="td"?_=void 0:!_&&A&&(_="col");const U=h||b&&b.variant,z={...n,align:r,component:m,padding:d||(x&&x.padding?x.padding:"normal"),size:g||(x&&x.size?x.size:"medium"),sortDirection:s,stickyHeader:U==="head"&&x&&x.stickyHeader,variant:U},L=ee(z);let E=null;return s&&(E=s==="asc"?"ascending":"descending"),e.jsx(te,{as:m,ref:a,className:R(L.root,i),"aria-sort":E,scope:_,ownerState:z,...f})});function oe(t){return T("MuiTableHead",t)}C("MuiTableHead",["root"]);const ae=t=>{const{classes:o}=t;return H({root:["root"]},oe,o)},se=k("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),re={variant:"head"},F="thead",P=p.forwardRef(function(o,a){const n=w({props:o,name:"MuiTableHead"}),{className:r,component:i=F,...l}=n,d={...n,component:i},u=ae(d);return e.jsx($.Provider,{value:re,children:e.jsx(se,{as:i,className:R(u.root,r),ref:a,role:i===F?null:"rowgroup",ownerState:d,...l})})});function ie(t){return T("MuiTableRow",t)}const I=C("MuiTableRow",["root","selected","hover","head","footer"]),ne=t=>{const{classes:o,selected:a,hover:n,head:r,footer:i}=t;return H({root:["root",a&&"selected",n&&"hover",r&&"head",i&&"footer"]},ie,o)},le=k("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:a}=t;return[o.root,a.head&&o.head,a.footer&&o.footer]}})(S(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${I.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${I.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`)}}}))),O="tr",v=p.forwardRef(function(o,a){const n=w({props:o,name:"MuiTableRow"}),{className:r,component:i=O,hover:l=!1,selected:d=!1,...u}=n,g=p.useContext($),s={...n,component:i,hover:l,selected:d,head:g&&g.variant==="head",footer:g&&g.variant==="footer"},h=ne(s);return e.jsx(le,{as:i,ref:a,className:R(h.root,r),role:i===O?null:"row",ownerState:s,...u})});function ce({update:t}){const[o,a]=p.useState(""),n=async()=>{const{data:r,error:i}=await y.from("tech_type").insert({type:o}).select();i&&console.error(i),r&&(a(""),t())};return e.jsxs("div",{className:"form",children:[e.jsx("h3",{children:"Agregar tipo de tecnologia"}),e.jsx("label",{htmlFor:"tipo",children:"Tipo:"}),e.jsx("input",{type:"text",name:"tipo",id:"tipo",value:o,onChange:r=>a(r.target.value)}),e.jsx("button",{onClick:n,children:"Enviar"})]})}function de({update:t,techType:o}){const[a,n]=p.useState({tipo:null,tecnologia:""}),r=async()=>{console.log(a);const{data:i,error:l}=await y.from("tech").insert({technology:a.tecnologia,type:a.tipo}).select();l&&console.error(l),i&&(n({tipo:null,tecnologia:""}),t())};return e.jsxs("div",{className:"form",children:[e.jsx("h3",{children:"Agregar tecnologia"}),e.jsx("label",{htmlFor:"tipo",children:"Tecnologia:"}),e.jsx("input",{type:"text",name:"tipo",id:"tipo",value:a.tecnologia,onChange:i=>n({tecnologia:i.target.value,tipo:a.tipo})}),e.jsx("select",{value:a.tipo?a.tipo:"",onChange:i=>n({tipo:Number(i.target.value),tecnologia:a.tecnologia}),children:o.map(i=>e.jsx("option",{value:i.id,children:i.type},i.id))}),e.jsx("button",{onClick:r,children:"Enviar"})]})}function pe({update:t}){const[o,a]=p.useState({title:"",description:"",github:"",is_public:!1,image:null,created_at:""}),n=async()=>{if(!o.title||!o.image)return;const r=o.image.name.split(".").pop(),l=`proyects/${`${crypto.randomUUID()}.${r}`}`,{error:d}=await y.storage.from("content").upload(l,o.image);if(d){console.error("Upload error:",d);return}const{data:u}=y.storage.from("content").getPublicUrl(l),{error:g}=await y.from("proyect").insert({title:o.title,description:o.description,github:o.github,is_public:o.is_public,photo_url:u.publicUrl,created_at:o.created_at});if(g){console.error("Insert error:",g);return}a({title:"",description:"",github:"",is_public:!1,image:null,created_at:""}),t()};return e.jsxs("div",{className:"form",children:[e.jsx("h3",{children:"Agregar proyecto"}),e.jsx("label",{htmlFor:"date",children:"Fecha"}),e.jsx("input",{type:"date",id:"date",value:o.created_at,onChange:r=>a({...o,created_at:r.target.value})}),e.jsx("input",{type:"text",placeholder:"Título",value:o.title,onChange:r=>a({...o,title:r.target.value})}),e.jsx("textarea",{placeholder:"Descripción",value:o.description,onChange:r=>a({...o,description:r.target.value})}),e.jsx("input",{type:"text",placeholder:"GitHub URL",value:o.github,onChange:r=>a({...o,github:r.target.value})}),e.jsx("input",{type:"file",accept:"image/*",onChange:r=>a({...o,image:r.target.files?.[0]??null})}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:o.is_public,onChange:r=>a({...o,is_public:r.target.checked})}),"Público"]}),e.jsx("button",{onClick:n,children:"Enviar"})]})}function he(){const[t,o]=p.useState([]),[a,n]=p.useState([]),[r,i]=p.useState([]),l=async()=>{const{data:s,error:h}=await y.from("proyect").select("*").order("created_at",{ascending:!1});h&&console.error(h),s&&o(s)},d=async s=>{const{data:h,error:f}=await y.from("proyect").select("is_public").eq("id",s).single();if(f){console.error(f);return}const{data:x,error:b}=await y.from("proyect").update({is_public:!h.is_public}).eq("id",s).select();b&&console.error(b),x&&o(x)},u=async()=>{const{data:s,error:h}=await y.from("tech").select("id, technology, tech_type(id, type)");h&&console.error(h),s&&n(s)},g=async()=>{const{data:s,error:h}=await y.from("tech_type").select("*");h&&console.error(h),s&&i(s)};return p.useEffect(()=>{l(),u(),g()},[]),e.jsxs("div",{className:"admin",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Proyectos"}),e.jsxs(M,{children:[e.jsx(P,{children:e.jsxs(v,{children:[e.jsx(c,{children:"ID"}),e.jsx(c,{children:"Titulo"}),e.jsx(c,{children:"Fecha"}),e.jsx(c,{children:"Publico"}),e.jsx(c,{children:"Acción"})]})}),e.jsx(N,{children:t.map(s=>e.jsxs(v,{children:[e.jsx(c,{children:s.id}),e.jsx(c,{children:s.title}),e.jsx(c,{children:s.created_at}),e.jsx(c,{children:s.is_public?"Si":"No"}),e.jsx(c,{children:e.jsx("button",{onClick:()=>{d(s.id)},children:"Cambiar visibilidad"})})]},s.id))})]}),e.jsx(pe,{update:l})]}),e.jsx("div",{children:e.jsx("h1",{children:"Trabajos"})}),e.jsxs("div",{children:[e.jsx("h1",{children:"Tecnologias"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{children:e.jsxs(M,{children:[e.jsx(P,{children:e.jsxs(v,{children:[e.jsx(c,{children:"ID"}),e.jsx(c,{children:"Tecnologia"}),e.jsx(c,{children:"Tipo"}),e.jsx(c,{children:"Acción"})]})}),e.jsx(N,{children:a.map(s=>e.jsxs(v,{children:[e.jsx(c,{children:s.id}),e.jsx(c,{children:s.technology}),e.jsx(c,{children:s.tech_type instanceof Array?s.tech_type[0].type:s.tech_type.type}),e.jsx(c,{})]},s.id))})]})}),e.jsx("div",{children:e.jsxs(M,{children:[e.jsx(P,{children:e.jsxs(v,{children:[e.jsx(c,{children:"ID"}),e.jsx(c,{children:"Tipo"}),e.jsx(c,{children:"Acción"})]})}),e.jsx(N,{children:r.map(s=>e.jsxs(v,{children:[e.jsx(c,{children:s.id}),e.jsx(c,{children:s.type}),e.jsx(c,{})]},s.id))})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx(ce,{update:g}),e.jsx(de,{update:u,techType:r})]})]})]})}export{he as default};
