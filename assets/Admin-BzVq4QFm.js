import{r as p,g as C,b as w,u as k,j as e,s as R,f as H,h as _,m as A,n as j,k as b,l as W}from"./index-DgmVCOGL.js";const q=p.createContext();function G(t){return C("MuiTable",t)}w("MuiTable",["root","stickyHeader"]);const J=t=>{const{classes:o,stickyHeader:a}=t;return _({root:["root",a&&"stickyHeader"]},G,o)},K=R("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:a}=t;return[o.root,a.stickyHeader&&o.stickyHeader]}})(A(({theme:t})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...t.typography.body2,padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:o})=>o.stickyHeader,style:{borderCollapse:"separate"}}]}))),B="table",N=p.forwardRef(function(o,a){const n=k({props:o,name:"MuiTable"}),{className:s,component:r=B,padding:c="normal",size:d="medium",stickyHeader:u=!1,...h}=n,x={...n,component:r,padding:c,size:d,stickyHeader:u},i=J(x),g=p.useMemo(()=>({padding:c,size:d,stickyHeader:u}),[c,d,u]);return e.jsx(q.Provider,{value:g,children:e.jsx(K,{as:r,role:r===B?null:"table",ref:a,className:H(i.root,s),ownerState:x,...h})})}),M=p.createContext();function Q(t){return C("MuiTableBody",t)}w("MuiTableBody",["root"]);const V=t=>{const{classes:o}=t;return _({root:["root"]},Q,o)},X=R("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),Y={variant:"body"},D="tbody",P=p.forwardRef(function(o,a){const n=k({props:o,name:"MuiTableBody"}),{className:s,component:r=D,...c}=n,d={...n,component:r},u=V(d);return e.jsx(M.Provider,{value:Y,children:e.jsx(X,{className:H(u.root,s),as:r,ref:a,role:r===D?null:"rowgroup",ownerState:d,...c})})});function Z(t){return C("MuiTableCell",t)}const ee=w("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),te=t=>{const{classes:o,variant:a,align:n,padding:s,size:r,stickyHeader:c}=t,d={root:["root",a,c&&"stickyHeader",n!=="inherit"&&`align${j(n)}`,s!=="normal"&&`padding${j(s)}`,`size${j(r)}`]};return _(d,Z,o)},oe=R("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:a}=t;return[o.root,o[a.variant],o[`size${j(a.size)}`],a.padding!=="normal"&&o[`padding${j(a.padding)}`],a.align!=="inherit"&&o[`align${j(a.align)}`],a.stickyHeader&&o.stickyHeader]}})(A(({theme:t})=>({...t.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?t.lighten(t.alpha(t.palette.divider,1),.88):t.darken(t.alpha(t.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(t.vars||t).palette.text.primary}},{props:{variant:"footer"},style:{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${ee.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:o})=>o.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default}}]}))),l=p.forwardRef(function(o,a){const n=k({props:o,name:"MuiTableCell"}),{align:s="inherit",className:r,component:c,padding:d,scope:u,size:h,sortDirection:x,variant:i,...g}=n,y=p.useContext(q),f=p.useContext(M),m=f&&f.variant==="head";let T;c?T=c:T=m?"th":"td";let $=u;T==="td"?$=void 0:!$&&m&&($="col");const U=i||f&&f.variant,z={...n,align:s,component:T,padding:d||(y&&y.padding?y.padding:"normal"),size:h||(y&&y.size?y.size:"medium"),sortDirection:x,stickyHeader:U==="head"&&y&&y.stickyHeader,variant:U},L=te(z);let E=null;return x&&(E=x==="asc"?"ascending":"descending"),e.jsx(oe,{as:T,ref:a,className:H(L.root,r),"aria-sort":E,scope:$,ownerState:z,...g})});function ae(t){return C("MuiTableHead",t)}w("MuiTableHead",["root"]);const se=t=>{const{classes:o}=t;return _({root:["root"]},ae,o)},re=R("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),ie={variant:"head"},F="thead",S=p.forwardRef(function(o,a){const n=k({props:o,name:"MuiTableHead"}),{className:s,component:r=F,...c}=n,d={...n,component:r},u=se(d);return e.jsx(M.Provider,{value:ie,children:e.jsx(re,{as:r,className:H(u.root,s),ref:a,role:r===F?null:"rowgroup",ownerState:d,...c})})});function ne(t){return C("MuiTableRow",t)}const I=w("MuiTableRow",["root","selected","hover","head","footer"]),le=t=>{const{classes:o,selected:a,hover:n,head:s,footer:r}=t;return _({root:["root",a&&"selected",n&&"hover",s&&"head",r&&"footer"]},ne,o)},ce=R("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:a}=t;return[o.root,a.head&&o.head,a.footer&&o.footer]}})(A(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${I.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${I.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`)}}}))),O="tr",v=p.forwardRef(function(o,a){const n=k({props:o,name:"MuiTableRow"}),{className:s,component:r=O,hover:c=!1,selected:d=!1,...u}=n,h=p.useContext(M),x={...n,component:r,hover:c,selected:d,head:h&&h.variant==="head",footer:h&&h.variant==="footer"},i=le(x);return e.jsx(ce,{as:r,ref:a,className:H(i.root,s),role:r===O?null:"row",ownerState:x,...u})});function de({update:t}){const[o,a]=p.useState(""),n=async()=>{const{data:s,error:r}=await b.from("tech_type").insert({type:o}).select();r&&console.error(r),s&&(a(""),t())};return e.jsxs("div",{className:"form",children:[e.jsx("h3",{children:"Agregar tipo de tecnologia"}),e.jsx("label",{htmlFor:"tipo",children:"Tipo:"}),e.jsx("input",{type:"text",name:"tipo",id:"tipo",value:o,onChange:s=>a(s.target.value)}),e.jsx("button",{onClick:n,children:"Enviar"})]})}function pe({update:t,techType:o}){const[a,n]=p.useState({tipo:null,tecnologia:""}),s=async()=>{console.log(a);const{data:r,error:c}=await b.from("tech").insert({technology:a.tecnologia,type:a.tipo}).select();c&&console.error(c),r&&(n({tipo:null,tecnologia:""}),t())};return e.jsxs("div",{className:"form",children:[e.jsx("h3",{children:"Agregar tecnologia"}),e.jsx("label",{htmlFor:"tipo",children:"Tecnologia:"}),e.jsx("input",{type:"text",name:"tipo",id:"tipo",value:a.tecnologia,onChange:r=>n({tecnologia:r.target.value,tipo:a.tipo})}),e.jsx("select",{value:a.tipo?a.tipo:"",onChange:r=>n({tipo:Number(r.target.value),tecnologia:a.tecnologia}),children:o.map(r=>e.jsx("option",{value:r.id,children:r.type},r.id))}),e.jsx("button",{onClick:s,children:"Enviar"})]})}function ue({update:t}){const[o,a]=p.useState({title:"",description:"",github:"",is_public:!1,image:null,created_at:""}),n=async()=>{if(!o.title||!o.image)return;const s=o.image.name.split(".").pop(),c=`proyects/${`${crypto.randomUUID()}.${s}`}`,{error:d}=await b.storage.from("content").upload(c,o.image);if(d){console.error("Upload error:",d);return}const{data:u}=b.storage.from("content").getPublicUrl(c),{error:h}=await b.from("proyect").insert({title:o.title,description:o.description,github:o.github,is_public:o.is_public,photo_url:u.publicUrl,created_at:o.created_at});if(h){console.error("Insert error:",h);return}a({title:"",description:"",github:"",is_public:!1,image:null,created_at:""}),t()};return e.jsxs("div",{className:"form",children:[e.jsx("h3",{children:"Agregar proyecto"}),e.jsx("label",{htmlFor:"date",children:"Fecha"}),e.jsx("input",{type:"date",id:"date",value:o.created_at,onChange:s=>a({...o,created_at:s.target.value})}),e.jsx("input",{type:"text",placeholder:"Título",value:o.title,onChange:s=>a({...o,title:s.target.value})}),e.jsx("textarea",{placeholder:"Descripción",value:o.description,onChange:s=>a({...o,description:s.target.value})}),e.jsx("input",{type:"text",placeholder:"GitHub URL",value:o.github,onChange:s=>a({...o,github:s.target.value})}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>a({...o,image:s.target.files?.[0]??null})}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:o.is_public,onChange:s=>a({...o,is_public:s.target.checked})}),"Público"]}),e.jsx("button",{onClick:n,children:"Enviar"})]})}function ge(){const[t,o]=p.useState([]),[a,n]=p.useState([]),[s,r]=p.useState([]),c=W(),d=async()=>{const{data:i,error:g}=await b.from("proyect").select("*").order("created_at",{ascending:!1});g&&console.error(g),i&&o(i)},u=async i=>{const{data:g,error:y}=await b.from("proyect").select("is_public").eq("id",i).single();if(y){console.error(y);return}const{data:f,error:m}=await b.from("proyect").update({is_public:!g.is_public}).eq("id",i).select();m&&console.error(m),f&&o(f)},h=async()=>{const{data:i,error:g}=await b.from("tech").select("id, technology, tech_type(id, type)");g&&console.error(g),i&&n(i)},x=async()=>{const{data:i,error:g}=await b.from("tech_type").select("*");g&&console.error(g),i&&r(i)};return p.useEffect(()=>{d(),h(),x()},[]),e.jsxs("div",{className:"admin",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Proyectos"}),e.jsxs(N,{children:[e.jsx(S,{children:e.jsxs(v,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Titulo"}),e.jsx(l,{children:"Fecha"}),e.jsx(l,{children:"Publico"}),e.jsx(l,{children:"Acción"})]})}),e.jsx(P,{children:t.map(i=>e.jsxs(v,{children:[e.jsx(l,{children:i.id}),e.jsx(l,{children:i.title}),e.jsx(l,{children:i.created_at}),e.jsx(l,{children:i.is_public?"Si":"No"}),e.jsxs(l,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx("button",{onClick:()=>{u(i.id)},children:"Cambiar visibilidad"}),e.jsx("button",{onClick:()=>{c("proyect/"+i.id)},children:"editar"})]})]},i.id))})]}),e.jsx(ue,{update:d})]}),e.jsx("div",{children:e.jsx("h1",{children:"Trabajos"})}),e.jsxs("div",{children:[e.jsx("h1",{children:"Tecnologias"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{children:e.jsxs(N,{children:[e.jsx(S,{children:e.jsxs(v,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Tecnologia"}),e.jsx(l,{children:"Tipo"}),e.jsx(l,{children:"Acción"})]})}),e.jsx(P,{children:a.map(i=>e.jsxs(v,{children:[e.jsx(l,{children:i.id}),e.jsx(l,{children:i.technology}),e.jsx(l,{children:i.tech_type instanceof Array?i.tech_type[0].type:i.tech_type.type}),e.jsx(l,{})]},i.id))})]})}),e.jsx("div",{children:e.jsxs(N,{children:[e.jsx(S,{children:e.jsxs(v,{children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Tipo"}),e.jsx(l,{children:"Acción"})]})}),e.jsx(P,{children:s.map(i=>e.jsxs(v,{children:[e.jsx(l,{children:i.id}),e.jsx(l,{children:i.type}),e.jsx(l,{})]},i.id))})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx(pe,{update:h,techType:s}),e.jsx(de,{update:x})]})]})]})}export{ge as default};
